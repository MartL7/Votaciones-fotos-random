---
interface Props {
  arrayPronostic: { VoteId: string, CategoryId: string, count: number }[]
  totalVotes: number
}

const { arrayPronostic, totalVotes } = Astro.props
---

<div class="mt-5 md:mt-10 flex justify-center w-full items-center flex-col">
    <div class="container-pronostic mb-10 px-5 md:px-0">
      {
        arrayPronostic.map(({ VoteId, count, CategoryId }) => {
          const porcentageCount = (count / totalVotes) * 100
          const teacher = VoteId.split('-').at(1)
          const isMeme = CategoryId.includes('category-memes')
          const imageSrc = isMeme ? `/img/Memes/${VoteId}.webp` : `/img/Profes/${teacher}/${teacher}-image-presentation.webp`

          return (
            <div class={isMeme ? 'flex flex-col gap-2 items-center h-[200px]  md:h-[300px]': 'relative flex flex-col items-center md:h-[400px]'}>
              <img 
                loading="lazy"
                decoding="async"
                src={imageSrc}
                alt={`Imagen ${VoteId}`} 
                class={isMeme ? 'size-40 sm:size-full md:h-[250px] rounded-lg' : 'object-cover h-full hover:scale-110 hover:saturate-150 cursor-pointer transition' } 
                style={!isMeme ? 'mask-image: linear-gradient(black 50%, transparent);' : ''}
              />
              <span class={!isMeme ? `font-Dancing font-bold skew-y-[-21deg] pointer-events-none text-center absolute bottom-20 z-50 mx-auto text-4xl lg:text-6xl` : 'hidden'}>
                {teacher}
              </span>
              
              <p class="text-3xl md:text-5xl font-bold font-Public text-accent">       
                {porcentageCount.toFixed(2)} %
              </p>

            </div>
          )
        })
      }
    </div>
</div>

<style>
  .container-pronostic {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 3rem;
  }
</style>
